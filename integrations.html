<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrations - Airtable Lead Enricher</title>
    <link rel="icon" type="image/png" href="https://images.apifyusercontent.com/hIWSIagcj8949hoLcWRj_q-7YXhT9xpVuYWR4RP93uU/rs:fill:250:250/cb:1/aHR0cHM6Ly9hcGlmeS1pbWFnZS11cGxvYWRzLXByb2QuczMudXMtZWFzdC0xLmFtYXpvbmF3cy5jb20vOHp1MThIQW4xN1Q4NXpGeFUtYWN0b3ItY1ZEcEF0dHBoY3BETTR2RngtMnpveEVnMEhlRi1haXJ0YWJsZS1sZWFkLWVucmljaGVyLXRyYW5zcGFyZW50LnBuZw.webp">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; line-height: 1.6; color: #333; background: #f5f5f5; }

        .container { max-width: 900px; margin: 0 auto; padding: 40px 20px; }
        header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px 0; text-align: center; }
        header h1 { font-size: 2rem; }
        header p { opacity: 0.9; margin-top: 0.5rem; }

        .card { background: white; border-radius: 8px; padding: 30px; margin: 20px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        h2 { color: #667eea; margin-bottom: 15px; font-size: 1.6rem; }
        h3 { color: #764ba2; margin: 25px 0 10px; font-size: 1.3rem; }
        h4 { color: #555; margin: 20px 0 10px; font-size: 1.1rem; }

        pre { background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 4px; overflow-x: auto; margin: 15px 0; }
        pre code { background: transparent; padding: 0; }
        code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: monospace; }

        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #f7f7f7; font-weight: 600; color: #667eea; }

        .note { background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 15px 0; border-radius: 4px; }
        .example-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .example-card { background: #f8f9fa; padding: 15px; border-radius: 6px; border-left: 3px solid #667eea; }
        .example-card strong { color: #667eea; display: block; margin-bottom: 5px; }

        a { color: #667eea; text-decoration: none; }
        a:hover { text-decoration: underline; }

        footer { text-align: center; padding: 30px; color: #666; }
    </style>
</head>
<body>
    <header>
        <h1>API Integrations</h1>
        <p>Use without Airtable in Lambda, Airflow, Glue, GCP, and more</p>
    </header>

    <div class="container">
        <div class="card">
            <h2>Processing Modes</h2>
            <p>Choose how to use the enricher:</p>

            <table>
                <tr><th>Mode</th><th>Use Case</th><th>Needs Airtable?</th></tr>
                <tr>
                    <td><code>batch</code></td>
                    <td>Read from Airtable, enrich, write back</td>
                    <td>‚úÖ Yes - requires apiKey, baseId, tableId</td>
                </tr>
                <tr>
                    <td><code>single</code></td>
                    <td>Enrich specific Airtable records</td>
                    <td>‚úÖ Yes - same as batch + recordIds</td>
                </tr>
                <tr>
                    <td><code>api</code></td>
                    <td>Standalone enrichment (no Airtable)</td>
                    <td>‚ùå No - just provide companies array</td>
                </tr>
            </table>
        </div>

        <div class="card">
            <h2>Quick Start (API Mode)</h2>
            <p>Use without Airtable - perfect for integrations:</p>
            <pre><code class="language-bash">POST https://api.apify.com/v2/acts/datahq~airtable-lead-enricher/run-sync-get-dataset-items?token=YOUR_TOKEN

{
  "mode": "api",
  "companies": [
    {"companyName": "Acme Corp", "website": "https://acme.example"}
  ]
}</code></pre>
            <p><strong>Max 1000 companies per run (API mode)</strong></p>
            <p><strong>For Airtable mode:</strong> Max 100 records per run</p>
        </div>

        <div class="card">
            <h2>Integration Examples</h2>
            <p>Ready-to-use code for common platforms. All examples in <code>examples/</code> directory.</p>

            <div class="note">
                <strong>üìù API Keys:</strong> Pass your LLM API key directly in the JSON config under <code>"llm": {"apiKey": "sk-..."}</code>. Examples show reading from infrastructure env vars - that's optional and only for your own code.
            </div>

            <div class="example-grid">
                <div class="example-card">
                    <strong>AWS Lambda</strong>
                    <a href="#lambda">Python</a> ‚Ä¢ <a href="#lambda-node">Node.js</a>
                </div>
                <div class="example-card">
                    <strong>GCP Functions</strong>
                    <a href="#gcp">Python</a>
                </div>
                <div class="example-card">
                    <strong>AWS Glue</strong>
                    <a href="#glue">ETL Job</a>
                </div>
                <div class="example-card">
                    <strong>AWS ECS</strong>
                    <a href="#ecs">Task Definition</a>
                </div>
                <div class="example-card">
                    <strong>Docker</strong>
                    <a href="#docker">Run Anywhere</a>
                </div>
                <div class="example-card">
                    <strong>GitHub Actions</strong>
                    <a href="#github">Workflow</a>
                </div>
                <div class="example-card">
                    <strong>Airflow</strong>
                    <a href="#airflow">DAG</a>
                </div>
                <div class="example-card">
                    <strong>CRM Systems</strong>
                    <a href="#crm">Salesforce, HubSpot, Pipedrive</a>
                </div>
            </div>
        </div>

        <div class="card" id="lambda">
            <h3>AWS Lambda (Python)</h3>
            <p>File: <code>examples/lambda_python.py</code></p>
            <pre><code class="language-python">import json
import os
import requests

def lambda_handler(event, context):
    config = {
        "mode": "api",
        "companies": [
            {"companyName": "Acme Corp", "website": "https://acme.example"}
        ],
        "llm": {
            "enabled": True,
            "provider": "openai",
            "apiKey": os.environ['OPENAI_API_KEY']
        }
    }

    response = requests.post(
        "https://api.apify.com/v2/acts/datahq~airtable-lead-enricher/run-sync-get-dataset-items",
        params={"token": os.environ['APIFY_TOKEN']},
        json=config,
        timeout=300
    )

    results = response.json()
    enriched = [r for r in results if r.get('type') == 'ENRICHED_COMPANY']

    return {'statusCode': 200, 'body': json.dumps({'enriched': enriched})}</code></pre>
            <p><strong>Environment Variables:</strong> <code>APIFY_TOKEN</code>, <code>OPENAI_API_KEY</code></p>
        </div>

        <div class="card" id="lambda-node">
            <h3>AWS Lambda (Node.js)</h3>
            <p>File: <code>examples/lambda_node.js</code></p>
            <pre><code class="language-javascript">exports.handler = async (event) => {
  const config = {
    mode: "api",
    companies: [
      { companyName: "Acme Corp", website: "https://acme.example" }
    ],
    llm: {
      enabled: true,
      provider: "openai",
      apiKey: process.env.OPENAI_API_KEY
    }
  };

  const response = await fetch(
    `https://api.apify.com/v2/acts/datahq~airtable-lead-enricher/run-sync-get-dataset-items?token=${process.env.APIFY_TOKEN}`,
    {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(config)
    }
  );

  const results = await response.json();
  const enriched = results.filter(r => r.type === 'ENRICHED_COMPANY');

  return { statusCode: 200, body: JSON.stringify({ enriched }) };
};</code></pre>
        </div>

        <div class="card" id="gcp">
            <h3>GCP Cloud Functions (Python)</h3>
            <p>File: <code>examples/gcp_function_python.py</code></p>
            <pre><code class="language-python">import functions_framework
import requests
import os

@functions_framework.http
def enrich_leads(request):
    request_json = request.get_json(silent=True)
    companies = request_json.get('companies', [])

    config = {
        "mode": "api",
        "companies": companies,
        "llm": {
            "enabled": True,
            "provider": "openai",
            "apiKey": os.environ['OPENAI_API_KEY']
        }
    }

    response = requests.post(
        "https://api.apify.com/v2/acts/datahq~airtable-lead-enricher/run-sync-get-dataset-items",
        params={"token": os.environ['APIFY_TOKEN']},
        json=config,
        timeout=300
    )

    results = response.json()
    enriched = [r for r in results if r.get('type') == 'ENRICHED_COMPANY']
    return json.dumps({'enriched': enriched})</code></pre>
        </div>

        <div class="card" id="glue">
            <h3>AWS Glue Job</h3>
            <p>File: <code>examples/glue_job.py</code></p>
            <pre><code class="language-python">from awsglue.utils import getResolvedOptions
from pyspark.context import SparkContext
from awsglue.context import GlueContext
import requests

args = getResolvedOptions(sys.argv, ['JOB_NAME', 'APIFY_TOKEN', 'OPENAI_API_KEY'])
sc = SparkContext()
glueContext = GlueContext(sc)

# Read input data
input_df = glueContext.create_dynamic_frame.from_catalog(
    database="your_database",
    table_name="companies"
).toDF()

# Enrich each company
for row in input_df.collect():
    config = {
        "mode": "api",
        "companies": [{"companyName": row.company_name, "website": row.website}],
        "llm": {"enabled": True, "provider": "openai", "apiKey": args['OPENAI_API_KEY']}
    }

    response = requests.post(
        "https://api.apify.com/v2/acts/datahq~airtable-lead-enricher/run-sync-get-dataset-items",
        params={"token": args['APIFY_TOKEN']},
        json=config
    )
    # Process results...</code></pre>
        </div>

        <div class="card" id="ecs">
            <h3>AWS ECS/Fargate</h3>
            <p>File: <code>examples/ecs_task_definition.json</code></p>
            <pre><code class="language-json">{
  "family": "lead-enricher",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "256",
  "memory": "512",
  "containerDefinitions": [{
    "name": "lead-enricher",
    "image": "python:3.11-slim",
    "command": ["python", "-c", "import requests; ..."],
    "secrets": [
      {"name": "APIFY_TOKEN", "valueFrom": "arn:aws:secretsmanager:..."},
      {"name": "OPENAI_API_KEY", "valueFrom": "arn:aws:secretsmanager:..."}
    ]
  }]
}</code></pre>
        </div>

        <div class="card" id="docker">
            <h3>Docker (EC2, Local, Anywhere)</h3>
            <p>File: <code>examples/docker_run.sh</code></p>
            <pre><code class="language-bash">docker run --rm \
  -e APIFY_TOKEN="${APIFY_TOKEN}" \
  -e OPENAI_API_KEY="${OPENAI_API_KEY}" \
  python:3.11-slim \
  bash -c "pip install requests && python -c 'import requests; ...'"</code></pre>
        </div>

        <div class="card" id="github">
            <h3>GitHub Actions</h3>
            <p>File: <code>examples/github_actions.yml</code></p>
            <pre><code class="language-yaml">name: Enrich Leads
on:
  schedule:
    - cron: '0 2 * * *'  # Daily at 2 AM

jobs:
  enrich:
    runs-on: ubuntu-latest
    steps:
      - name: Enrich Leads
        env:
          APIFY_TOKEN: ${{ secrets.APIFY_TOKEN }}
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
        run: |
          curl -X POST \
            "https://api.apify.com/v2/acts/datahq~airtable-lead-enricher/run-sync-get-dataset-items?token=${APIFY_TOKEN}" \
            -H "Content-Type: application/json" \
            -d '{"mode":"api","companies":[...]}'</code></pre>
        </div>

        <div class="card" id="airflow">
            <h3>Apache Airflow</h3>
            <p>File: <code>examples/airflow_dag.py</code></p>
            <pre><code class="language-python">from airflow import DAG
from airflow.operators.python import PythonOperator
import requests

def enrich_leads(**context):
    config = {
        "mode": "api",
        "companies": [{"companyName": "Acme", "website": "https://acme.example"}],
        "llm": {"enabled": True, "provider": "openai", "apiKey": os.environ['OPENAI_API_KEY']}
    }

    response = requests.post(
        "https://api.apify.com/v2/acts/datahq~airtable-lead-enricher/run-sync-get-dataset-items",
        params={"token": os.environ['APIFY_TOKEN']},
        json=config
    )

    return response.json()

with DAG('enrich_leads', schedule_interval='0 2 * * *') as dag:
    PythonOperator(task_id='enrich', python_callable=enrich_leads)</code></pre>
        </div>

        <div class="card">
            <h2>Configuration</h2>

            <h3>Airtable Mode Config</h3>
            <pre><code class="language-json">{
  "mode": "batch",
  "airtable": {
    "apiKey": "patXXXXXXXXXXXXXX",
    "baseId": "appXXXXXXXXXXXXXX",
    "tableId": "tblXXXXXXXXXXXXXX",
    "inputFields": {
      "companyName": "Company Name",  // Map to your column
      "website": "Website"
    },
    "outputFields": {
      "email": "Contact Email",       // Map to your column
      "phone": "Phone Number",
      "leadScore": "Lead Score"
    }
  }
}</code></pre>

            <h3>API Mode Config</h3>
            <pre><code class="language-json">{
  "mode": "api",
  "companies": [
    {"companyName": "Acme", "website": "https://acme.example"}
  ],
  "llm": {
    "enabled": true,
    "provider": "openai",  // or "anthropic", "bedrock"
    "apiKey": "sk-...",
    "model": "gpt-4o"      // optional
  },
  "enrichment": {
    "sources": ["google_maps", "website", "hunter"],
    "hunter": {"enabled": true, "apiKey": "..."}
  },
  "scoring": {
    "enabled": true,
    "icpCriteria": "B2B SaaS, 50-500 employees, US-based"
  }
}</code></pre>

            <h3>LLM Providers</h3>
            <table>
                <tr><th>Provider</th><th>Model</th><th>API Key</th></tr>
                <tr><td>OpenAI</td><td>gpt-4o</td><td><a href="https://platform.openai.com/api-keys">Get key</a></td></tr>
                <tr><td>Anthropic</td><td>claude-haiku-4-5</td><td><a href="https://console.anthropic.com/settings/keys">Get key</a></td></tr>
                <tr><td>Bedrock</td><td>claude-haiku-4-5</td><td><a href="https://docs.aws.amazon.com/bedrock/latest/userguide/api-keys-generate.html">Setup</a></td></tr>
            </table>
        </div>

        <div class="card" id="crm">
            <h2>CRM Integrations</h2>
            <p>Integrate with Salesforce, HubSpot, Pipedrive, Zoho, and other CRMs.</p>

            <h3>Method 1: Webhooks</h3>
            <p>Receive enriched data via POST webhook:</p>
            <pre><code class="language-json">{
  "webhookUrl": "https://your-crm.com/webhook/enriched-leads"
}</code></pre>

            <h3>Method 2: Automation Platforms</h3>
            <table>
                <tr><th>Platform</th><th>Use Case</th></tr>
                <tr><td><strong>Zapier</strong></td><td>New CRM lead ‚Üí Enrich ‚Üí Update CRM</td></tr>
                <tr><td><strong>Make (Integromat)</strong></td><td>Schedule enrichment, sync to CRM</td></tr>
                <tr><td><strong>n8n</strong></td><td>Self-hosted workflow automation</td></tr>
            </table>

            <h3>Method 3: Direct API</h3>
            <p>Call from CRM automation (Salesforce Apex, HubSpot workflows, etc.):</p>
            <pre><code class="language-javascript">// HubSpot Workflow Custom Code
const response = await fetch(
  'https://api.apify.com/v2/acts/datahq~airtable-lead-enricher/run-sync-get-dataset-items?token=YOUR_TOKEN',
  {
    method: 'POST',
    body: JSON.stringify({
      mode: 'api',
      companies: [{ companyName: company.name, website: company.website }]
    })
  }
);

// Update HubSpot contact with enriched data
const enriched = await response.json();
// ... update logic ...</code></pre>

            <h3>Example: Salesforce ‚Üí Enrich ‚Üí Update</h3>
            <p><strong>Using Make.com:</strong></p>
            <ol style="margin-left: 20px;">
                <li>Trigger: New Salesforce Lead created</li>
                <li>HTTP Module: POST to Apify API with lead data</li>
                <li>Salesforce Module: Update lead with enriched data (email, phone, score)</li>
            </ol>

            <h3>Example: HubSpot Auto-Enrichment</h3>
            <p><strong>Using Zapier:</strong></p>
            <ol style="margin-left: 20px;">
                <li>Trigger: New HubSpot contact added to list "Needs Enrichment"</li>
                <li>Webhooks by Zapier: POST to Apify API</li>
                <li>HubSpot: Update contact properties with enriched data</li>
                <li>HubSpot: Remove from "Needs Enrichment" list</li>
            </ol>
        </div>

        <div class="card">
            <h2>Response Format</h2>
            <pre><code class="language-json">[
  {
    "type": "RUN_STATS",
    "stats": {"companiesProcessed": 1, "enrichmentSuccessful": 1, "llmEnabled": true}
  },
  {
    "type": "ENRICHED_COMPANY",
    "input": {"companyName": "Acme Corp", "website": "https://acme.example"},
    "output": {
      "email": "contact@acme.example",
      "phone": "+1 555 0100",
      "leadScore": "Good",
      "icpScore": "Fair",
      "summary": "...",
      "techStack": ["React", "Node.js"],
      "enrichedAt": "2025-12-21T10:00:00.000Z"
    },
    "success": true
  }
]</code></pre>

            <h3>Output Fields</h3>
            <table>
                <tr><th>Field</th><th>Source</th></tr>
                <tr><td>email</td><td>Website / Hunter</td></tr>
                <tr><td>phone</td><td>Maps / Website</td></tr>
                <tr><td>leadScore</td><td>AI (Excellent/Good/Fair/Poor/Bad)</td></tr>
                <tr><td>icpScore</td><td>AI (Excellent/Good/Fair/Poor/Bad)</td></tr>
                <tr><td>linkedinUrl</td><td>Hunter</td></tr>
                <tr><td>techStack</td><td>Website</td></tr>
                <tr><td>summary</td><td>AI</td></tr>
            </table>
        </div>

        <div class="card">
            <h2>Links</h2>
            <ul style="margin-left: 20px;">
                <li><a href="index.html">‚Üê Back to Docs</a></li>
                <li><a href="configuration.html">Configuration Guide</a></li>
                <li><a href="https://apify.com/datahq/airtable-lead-enricher">Apify Actor Page</a></li>
                <li><a href="https://github.com/datahq/airtable-lead-enricher/tree/main/examples">View All Examples on GitHub</a></li>
            </ul>
        </div>
    </div>

    <footer>
        <p><a href="https://apify.com/datahq/airtable-lead-enricher/issues/open">Report Issue</a> ¬∑ <a href="index.html">Documentation</a></p>
    </footer>
</body>
</html>
